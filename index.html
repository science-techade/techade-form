<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>–û–ø—Ä–æ—Å–Ω—ã–π –ª–∏—Å—Ç –ø–æ —Ç–µ—Ö–ø—Ä–æ—Ü–µ—Å—Å—É</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/emailjs-com@2.6.4/dist/email.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  <style>
    .element-row { display: flex; gap: 10px; margin-bottom: 10px; }
    .element-row input { flex: 1; }
    .element-row button { white-space: nowrap; }
    .analyzer-section, .conditional-block { display: none; margin-top: 20px; padding: 15px; border: 1px solid #ccc; border-radius: 5px; background-color: #f9f9f9; }
  </style>
</head>
<body>

<div class="container mt-4">
  <h2 class="mb-4">–û–ø—Ä–æ—Å–Ω—ã–π –ª–∏—Å—Ç –ø–æ —Ç–µ—Ö–ø—Ä–æ—Ü–µ—Å—Å—É</h2>
  <form id="form">
  <div id="pdf-content">
  <input type="hidden" name="pdf_data" id="pdf_data">
    <!-- –û—Å–Ω–æ–≤–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è -->
    <div class="mb-4">
      <h5>–û—Å–Ω–æ–≤–Ω—ã–µ —Å–≤–µ–¥–µ–Ω–∏—è</h5>
      <div class="mb-3">
        <label for="date" class="form-label">–î–∞—Ç–∞ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –æ–ø—Ä–æ—Å–Ω–æ–≥–æ –ª–∏—Å—Ç–∞</label>
        <input type="date" id="date" name="date" class="form-control" required>
      </div>
      <div class="mb-3">
        <label for="company" class="form-label">–ù–∞–∑–≤–∞–Ω–∏–µ –∫–æ–º–ø–∞–Ω–∏–∏</label>
        <input type="text" id="company" name="company" class="form-control" required>
      </div>
      <div class="mb-3">
        <label for="contact_person" class="form-label">–ö–æ–Ω—Ç–∞–∫—Ç–Ω–æ–µ –ª–∏—Ü–æ</label>
        <input type="text" id="contact_person" name="contact_person" class="form-control">
      </div>
      <div class="mb-3">
        <label for="phone" class="form-label">–¢–µ–ª–µ—Ñ–æ–Ω</label>
        <input type="tel" id="phone" name="phone" class="form-control">
      </div>
      <div class="mb-3">
        <label for="email" class="form-label">Email</label>
        <input type="email" id="email" name="email" class="form-control">
      </div>
      <div class="mb-3">
        <label for="country" class="form-label">–°—Ç—Ä–∞–Ω–∞</label>
        <input type="text" id="country" name="country" class="form-control">
      </div>
      <div class="mb-3">
        <label for="location" class="form-label">–ú–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ</label>
        <input type="text" id="location" name="location" class="form-control">
      </div>
    </div>

    <!-- –í—ã–ø–∞–¥–∞—é—â–∏–π —Å–ø–∏—Å–æ–∫ –≤—ã–±–æ—Ä–∞ –º–∞—Ç–µ—Ä–∏–∞–ª–∞ -->
    <div class="mb-3">
      <label for="material" class="form-label">–¢–∏–ø –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞</label>
      <select id="material" name="material" class="form-select" required>
        <option value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>
        <option value="pulp">–ü—É–ª—å–ø–∞ (1‚Äì3 –ø–æ—Ç–æ–∫–∞ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞)</option>
        <option value="sinter">–®–∏—Ö—Ç–∞ / —Ä—É–¥–∞</option>
        <option value="multiplex">–ü—É–ª—å–ø–∞ —Å –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–æ—Ä–æ–º</option>
        <option value="courier">–ü—É–ª—å–ø–∞ —Å –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–æ—Ä–æ–º (–Ω–∞ –∑–∞–º–µ–Ω—É –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä–∞ –ö—É—Ä—å–µ—Ä)</option>
      </select>
    </div>

    <!-- –°–µ–∫—Ü–∏–∏ –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –∑–¥–µ—Å—å -->
    <div id="section-pulp" class="analyzer-section">
  <h5>–ü—É–ª—å–ø–∞: –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</h5>
  <div class="mb-3">
    <label class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</label>
    <input type="number" name="streams" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ –ø–æ–¥–∞—á–∏ –ø–∏—Ç–∞–Ω–∏—è</label>
    <select name="feed_type" id="feed_type" class="form-select">
      <option value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>
      <option value="naporny">–ù–∞–ø–æ—Ä–Ω—ã–π</option>
      <option value="samotek">–°–∞–º–æ—Ç–µ–∫</option>
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">–î–∏–∞–º–µ—Ç—Ä</label>
    <input type="text" name="pulp_diameter" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–ú–∞—Ç–µ—Ä–∏–∞–ª (–Ω–µ—Ä–∂. —Å—Ç–∞–ª—å, —Ä–µ–∑–∏–Ω–æ–≤–∞—è —Ñ—É—Ç–µ—Ä–æ–≤–∫–∞ –∏ —Ç.–¥.)</label>
    <input type="text" name="pulp_material" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–î–∞–≤–ª–µ–Ω–∏–µ –Ω–∞–≥–Ω–µ—Ç–∞–Ω–∏—è / –£–≥–æ–ª —Ä–∞–∑–≥—Ä—É–∑–∫–∏</label>
    <input type="text" name="pulp_pressure_angle" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã (–º–∏–Ω/–º–∞–∫—Å)</label>
    <input type="text" name="pulp_temperature" class="form-control">
  </div>
  <div class="mb-3">
    <h5>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –æ—Ç Ca –¥–æ U + –¥–∏–∞–ø–∞–∑–æ–Ω –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–π</h5>
    <div id="elements-ca-u"></div>
    <button type="button" class="btn btn-outline-primary btn-sm" onclick="addElementRow('elements-ca-u')">+ –î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç</button>
  </div>
  <div class="mb-3">
    <h5>–ê–Ω–∞–ª–∏–∑ –ª–µ–≥–∫–∏—Ö —Ö–∏–º–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤</h5>
    <div id="light-elements"></div>
    <button type="button" class="btn btn-outline-primary btn-sm" onclick="addElementRow('light-elements')">+ –î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç</button>
  </div>
  <div class="mb-3">
    <label class="form-label">–ü–ª–æ—Ç–Ω–æ—Å—Ç—å</label>
    <input type="text" name="pulp_density" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–í—Ä–µ–º—è –∏–∑–º–µ—Ä–µ–Ω–∏—è (–º–∏–Ω/—Å—Ä–µ–¥/–º–∞–∫—Å), —Å–µ–∫</label>
    <input type="text" name="pulp_measurement_time" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–ù–∞–ª–∏—á–∏–µ —Ç—è–∂—ë–ª—ã—Ö –º–µ—Ç–∞–ª–ª–æ–≤ –≤ –ø—É–ª—å–ø–µ</label>
    <input type="text" name="pulp_heavy_metals" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–°–æ—Å—Ç–∞–≤ –∂–∏–¥–∫–æ–π —Ñ–∞–∑—ã</label>
    <input type="text" name="pulp_liquid_phase" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–ü–µ—Ä–µ—á–µ–Ω—å –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–µ–∞–≥–µ–Ω—Ç–æ–≤</label>
    <input type="text" name="pulp_reagents" class="form-control">
  </div>
  <div class="mb-3">
    <h5>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è</h5>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="xrf_lab_pulp" name="xrf_lab">
      <label class="form-check-label" for="xrf_lab_pulp">–ù–∞–ª–∏—á–∏–µ –†–§–ê-–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏ –Ω–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–∏</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="personnel_access_pulp" name="personnel_access">
      <label class="form-check-label" for="personnel_access_pulp">–î–æ–ø—É—Å–∫ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="local_network_pulp" name="local_network">
      <label class="form-check-label" for="local_network_pulp">–ù–∞–ª–∏—á–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏</label>
      </div> 
 <div class="mb-3">
    <label class="form-label" for="installation_location_pulp">–ú–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏</label>
    <input type="text" class="form-control mb-2" id="installation_location_pulp" name="installation_location_pulp">

    <label class="form-label" for="installation_photo_pulp">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –º–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è (JPG, PNG)</label>
    <input type="file" class="form-control mb-2" id="installation_photo_pulp" name="installation_photo_pulp" accept=".jpg,.jpeg,.png,image/jpeg,image/png">

    <img id="installation_preview_pulp" alt="–ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" style="max-width: 100%; height: auto; display: none; border: 1px solid #ccc; margin-top: 10px;" />
  </div>

    <div class="mb-3">
      <label class="form-label" for="water_composition_pulp">–°–æ—Å—Ç–∞–≤ –æ–±–æ—Ä–æ—Ç–Ω–æ–π –≤–æ–¥—ã</label>
      <input type="text" class="form-control" id="water_composition_pulp" name="water_composition">
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="video_surveillance_pulp" name="video_surveillance">
      <label class="form-check-label" for="video_surveillance_pulp">–ù–∞–ª–∏—á–∏–µ –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏—è</label>
    </div>
  </div>
    </div>

    <div id="section-sinter" class="analyzer-section">
  <h5>–®–∏—Ö—Ç–∞ / —Ä—É–¥–∞: –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ</h5>
  <div class="mb-3">
    <label class="form-label">–†–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—é—Ç—Å—è –∞–Ω–∞–ª–∏–∑–∞—Ç–æ—Ä—ã</label>
    <select name="sinter_analyzer_type" class="form-select">
      <option value="">–í—ã–±–µ—Ä–∏—Ç–µ...</option>
      <option value="arp-1c">–ê–†–ü-1–¶</option>
      <option value="arp-2c">–ê–†–ü-2–¶</option>
    </select>
  </div>
  <div class="mb-3">
    <label class="form-label">–°–∫–æ—Ä–æ—Å—Ç—å –ª–µ–Ω—Ç—ã (–º/—Å)</label>
    <input type="text" name="sinter_belt_speed" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ –ª–µ–Ω—Ç–µ (—Ç–æ–Ω–Ω/—á–∞—Å, –º–∏–Ω/–º–∞–∫—Å)</label>
    <input type="text" name="sinter_belt_load" class="form-control">
  </div>
  <div class="mb-3">
    <h5>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –æ—Ç Ca –¥–æ U + –¥–∏–∞–ø–∞–∑–æ–Ω –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–π</h5>
    <div id="sinter-elements-ca-u"></div>
    <button type="button" class="btn btn-outline-primary btn-sm" onclick="addElementRow('sinter-elements-ca-u')">+ –î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç</button>
  </div>
  <div class="mb-3">
    <label class="form-label">–†–∞–∑–º–µ—Ä –∫—É—Å–∫–æ–≤ (–º–∞–∫—Å/—Å—Ä–µ–¥), –º–º</label>
    <input type="text" name="sinter_grain_size" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–ü–ª–æ—Ç–Ω–æ—Å—Ç—å</label>
    <input type="text" name="sinter_density" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–í—Ä–µ–º—è –∏–∑–º–µ—Ä–µ–Ω–∏—è (–º–∏–Ω/—Å—Ä–µ–¥/–º–∞–∫—Å), —Å–µ–∫</label>
    <input type="text" name="sinter_measurement_time" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–ù–∞–ª–∏—á–∏–µ —Ç—è–∂—ë–ª—ã—Ö –º–µ—Ç–∞–ª–ª–æ–≤ –≤ —à–∏—Ö—Ç–µ</label>
    <input type="text" name="sinter_heavy_metals" class="form-control">
  </div>
      <div class="mb-3">
    <h5>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è</h5>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="xrf_lab_sinter" name="xrf_lab">
      <label class="form-check-label" for="xrf_lab_sinter">–ù–∞–ª–∏—á–∏–µ –†–§–ê-–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏ –Ω–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–∏</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="personnel_access_sinter" name="personnel_access">
      <label class="form-check-label" for="personnel_access_sinter">–î–æ–ø—É—Å–∫ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="local_network_sinter" name="local_network">
      <label class="form-check-label" for="local_network_sinter">–ù–∞–ª–∏—á–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏</label>
    </div>
    <div class="mb-3">
    <label class="form-label" for="installation_location_sinter">–ú–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏</label>
    <input type="text" class="form-control mb-2" id="installation_location_sinter" name="installation_location_sinter">

    <label class="form-label" for="installation_photo_sinter">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –º–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è (JPG, PNG)</label>
    <input type="file" class="form-control mb-2" id="installation_photo_sinter" name="installation_photo_sinter" accept=".jpg,.jpeg,.png,image/jpeg,image/png">

    <img id="installation_preview_sinter" alt="–ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" style="max-width: 100%; height: auto; display: none; border: 1px solid #ccc; margin-top: 10px;" />
  </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="video_surveillance_sinter" name="video_surveillance">
      <label class="form-check-label" for="video_surveillance_sinter">–ù–∞–ª–∏—á–∏–µ –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏—è</label>
    </div>
</div>
</div> 

<div id="section-multiplex" class="analyzer-section">
  <h5>–ü—É–ª—å–ø–∞ —Å –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–æ—Ä–æ–º</h5>
  <div class="mb-3">
    <label class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</label>
    <input type="number" name="multiplex_streams" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–†–∞—Å—Å—Ç–æ—è–Ω–∏—è –º–µ–∂–¥—É —Ç–æ—á–∫–∞–º–∏</label>
    <input type="text" name="multiplex_distances" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–¢–∏–ø —Ç—Ä—É–±—ã –∏ –µ—ë —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ (–¥–∏–∞–º–µ—Ç—Ä)</label>
    <input type="text" name="multiplex_pipe_type" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–î–∞–≤–ª–µ–Ω–∏–µ –≤ —Ç—Ä—É–±–æ–ø—Ä–æ–≤–æ–¥–µ</label>
    <input type="text" name="multiplex_pressure" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã (–º–∏–Ω/–º–∞–∫—Å)</label>
    <input type="text" name="multiplex_temperature" class="form-control">
  </div>
<div class="mb-3">
        <h5>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –æ—Ç Ca –¥–æ U + –¥–∏–∞–ø–∞–∑–æ–Ω –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–π</h5>
        <div id="multiplex-elements-ca-u"></div>
        <button type="button" class="btn btn-outline-primary btn-sm" onclick="addElementRow('multiplex-elements-ca-u')">+ –î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç</button>
      </div>
      <div class="mb-3">
        <h5>–ê–Ω–∞–ª–∏–∑ –ª–µ–≥–∫–∏—Ö —Ö–∏–º–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤</h5>
        <div id="multiplex-light-elements"></div>
        <button type="button" class="btn btn-outline-primary btn-sm" onclick="addElementRow('multiplex-light-elements')">+ –î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç</button>
      </div>
  <div class="mb-3">
    <label class="form-label">–†–∞–∑–º–µ—Ä –∫—É—Å–∫–æ–≤ (–º–∞–∫—Å/—Å—Ä–µ–¥), –º–º</label>
    <input type="text" name="multiplex_grain_size" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–ü–ª–æ—Ç–Ω–æ—Å—Ç—å</label>
    <input type="text" name="multiplex_density" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–í—Ä–µ–º—è –∏–∑–º–µ—Ä–µ–Ω–∏—è (–º–∏–Ω/—Å—Ä–µ–¥/–º–∞–∫—Å), —Å–µ–∫</label>
    <input type="text" name="multiplex_measurement_time" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–ù–∞–ª–∏—á–∏–µ —Ç—è–∂—ë–ª—ã—Ö –º–µ—Ç–∞–ª–ª–æ–≤</label>
    <input type="text" name="multiplex_heavy_metals" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–°–æ—Å—Ç–∞–≤ –∂–∏–¥–∫–æ–π —Ñ–∞–∑—ã</label>
    <input type="text" name="multiplex_liquid_phase" class="form-control">
  </div>
    <div class="mb-3">
    <label class="form-label">–ü–µ—Ä–µ—á–µ–Ω—å –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–µ–∞–≥–µ–Ω—Ç–æ–≤</label>
    <input type="text" name="multiplex_reagents" class="form-control">
  </div>
  <div class="mb-3">
    <h5>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è</h5>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="xrf_lab_multiplex" name="xrf_lab">
      <label class="form-check-label" for="xrf_lab_multiplex">–ù–∞–ª–∏—á–∏–µ –†–§–ê-–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏ –Ω–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–∏</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="personnel_access_multiplex" name="personnel_access">
      <label class="form-check-label" for="personnel_access_multiplex">–î–æ–ø—É—Å–∫ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="local_network_multiplex" name="local_network">
      <label class="form-check-label" for="local_network_multiplex">–ù–∞–ª–∏—á–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏</label>
    </div>
    <div class="mb-3">
    <label class="form-label" for="installation_location_multiplex">–ú–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏</label>
    <input type="text" class="form-control mb-2" id="installation_location_multiplex" name="installation_location_multiplex">

    <label class="form-label" for="installation_photo_multiplex">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –º–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è (JPG, PNG)</label>
    <input type="file" class="form-control mb-2" id="installation_photo_multiplex" name="installation_photo_multiplex" accept=".jpg,.jpeg,.png,image/jpeg,image/png">

    <img id="installation_preview_multiplex" alt="–ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" style="max-width: 100%; height: auto; display: none; border: 1px solid #ccc; margin-top: 10px;" />
  </div>


    <div class="mb-3">
      <label class="form-label" for="water_composition_multiplex">–°–æ—Å—Ç–∞–≤ –æ–±–æ—Ä–æ—Ç–Ω–æ–π –≤–æ–¥—ã</label>
      <input type="text" class="form-control" id="water_composition_multiplex" name="water_composition">
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="video_surveillance_multiplex" name="video_surveillance">
      <label class="form-check-label" for="video_surveillance_multiplex">–ù–∞–ª–∏—á–∏–µ –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏—è</label>
    </div>
  </div>
</div>

  <div id="section-courier" class="analyzer-section">
      <h5>–ü—É–ª—å–ø–∞ —Å –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–æ—Ä–æ–º (–Ω–∞ –∑–∞–º–µ–Ω—É –ö—É—Ä—å–µ—Ä)</h5>
      <div class="mb-3">
        <label class="form-label">–ù–∞–ª–∏—á–∏–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º—ã –æ—Ç–±–æ—Ä–∞/–¥–æ—Å—Ç–∞–≤–∫–∏ –ø—Ä–æ–± (Courier, MOG –∏–ª–∏ –∏–Ω–∞—è)</label>
        <input type="text" name="courier_existing_system" class="form-control">
      </div>
      <div class="mb-3">
        <label class="form-label">–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ª–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º—É –º—É–ª—å—Ç–∏–ø–ª–µ–∫—Å–æ—Ä—É</label>
        <input type="text" name="courier_connection_plan" class="form-control">
      </div>
      <div class="mb-3">
        <label class="form-label">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–æ—á–µ–∫ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞</label>
        <input type="number" name="courier_streams" class="form-control">
      </div>
      <div class="mb-3">
        <label class="form-label">–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ –æ–∫—Ä—É–∂–∞—é—â–µ–π —Å—Ä–µ–¥—ã (–º–∏–Ω/–º–∞–∫—Å)</label>
        <input type="text" name="courier_temperature" class="form-control">
      </div>
 <div class="mb-3">
        <h5>–ê–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã –æ—Ç Ca –¥–æ U + –¥–∏–∞–ø–∞–∑–æ–Ω –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–π</h5>
        <div id="courier-elements-ca-u"></div>
        <button type="button" class="btn btn-outline-primary btn-sm" onclick="addElementRow('courier-elements-ca-u')">+ –î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç</button>
      </div>
      <div class="mb-3">
        <h5>–ê–Ω–∞–ª–∏–∑ –ª–µ–≥–∫–∏—Ö —Ö–∏–º–∏—á–µ—Å–∫–∏—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤</h5>
        <div id="courier-light-elements"></div>
        <button type="button" class="btn btn-outline-primary btn-sm" onclick="addElementRow('courier-light-elements')">+ –î–æ–±–∞–≤–∏—Ç—å —ç–ª–µ–º–µ–Ω—Ç</button>
      </div>
  <div class="mb-3">
    <label class="form-label">–ü–ª–æ—Ç–Ω–æ—Å—Ç—å</label>
    <input type="text" name="pulp_density" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–í—Ä–µ–º—è –∏–∑–º–µ—Ä–µ–Ω–∏—è (–º–∏–Ω/—Å—Ä–µ–¥/–º–∞–∫—Å), —Å–µ–∫</label>
    <input type="text" name="pulp_measurement_time" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–ù–∞–ª–∏—á–∏–µ —Ç—è–∂—ë–ª—ã—Ö –º–µ—Ç–∞–ª–ª–æ–≤ –≤ –ø—É–ª—å–ø–µ</label>
    <input type="text" name="pulp_heavy_metals" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–°–æ—Å—Ç–∞–≤ –∂–∏–¥–∫–æ–π —Ñ–∞–∑—ã</label>
    <input type="text" name="pulp_liquid_phase" class="form-control">
  </div>
  <div class="mb-3">
    <label class="form-label">–ü–µ—Ä–µ—á–µ–Ω—å –∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö —Ä–µ–∞–≥–µ–Ω—Ç–æ–≤</label>
    <input type="text" name="pulp_reagents" class="form-control">
  </div>
    <div class="mb-3">
    <h5>–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É—Å–ª–æ–≤–∏—è</h5>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="xrf_lab_courier" name="xrf_lab">
      <label class="form-check-label" for="xrf_lab_courier">–ù–∞–ª–∏—á–∏–µ –†–§–ê-–ª–∞–±–æ—Ä–∞—Ç–æ—Ä–∏–∏ –Ω–∞ –ø—Ä–µ–¥–ø—Ä–∏—è—Ç–∏–∏</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="personnel_access_courier" name="personnel_access">
      <label class="form-check-label" for="personnel_access_courier">–î–æ–ø—É—Å–∫ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞ –∫ –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º</label>
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="local_network_courier" name="local_network">
      <label class="form-check-label" for="local_network_courier">–ù–∞–ª–∏—á–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ–π —Å–µ—Ç–∏</label>
    </div>
 <div class="mb-3">
    <label class="form-label" for="installation_location_courier">–ú–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏</label>
    <input type="text" class="form-control mb-2" id="installation_location_courier" name="installation_location_courier">

    <label class="form-label" for="installation_photo_courier">–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –º–µ—Å—Ç–æ–Ω–∞—Ö–æ–∂–¥–µ–Ω–∏—è (JPG, PNG)</label>
    <input type="file" class="form-control mb-2" id="installation_photo_courier" name="installation_photo_courier" accept=".jpg,.jpeg,.png,image/jpeg,image/png">

    <img id="installation_preview_courier" alt="–ü—Ä–µ–≤—å—é –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è" style="max-width: 100%; height: auto; display: none; border: 1px solid #ccc; margin-top: 10px;" />
  </div>


    <div class="mb-3">
      <label class="form-label" for="water_composition_courier">–°–æ—Å—Ç–∞–≤ –æ–±–æ—Ä–æ—Ç–Ω–æ–π –≤–æ–¥—ã</label>
      <input type="text" class="form-control" id="water_composition_courier" name="water_composition">
    </div>
    <div class="form-check">
      <input class="form-check-input" type="checkbox" id="video_surveillance_courier" name="video_surveillance">
      <label class="form-check-label" for="video_surveillance_courier">–ù–∞–ª–∏—á–∏–µ –≤–∏–¥–µ–æ–Ω–∞–±–ª—é–¥–µ–Ω–∏—è</label>
    </div>
  </div>
    </div>
    </div>
    <div class="mb-3">
  <button type="button" class="btn btn-primary" onclick="submitForm()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
</div>
</form>


<iframe id="pdf-preview" style="width: 100%; height: 500px; margin-top: 20px; display: none;"></iframe>

    
<!-- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ EmailJS SDK (v3) -->
<script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<script>
  document.addEventListener("DOMContentLoaded", function () {
    emailjs.init("lK76KGFPVwTGiY9vX");

    const materialSelect = document.getElementById("material");
    materialSelect.addEventListener("change", () => showAnalyzerSection(materialSelect.value));
    showAnalyzerSection(materialSelect.value); // –ø—Ä–æ—Å—Ç–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

    ["pulp", "sinter", "multiplex", "courier"].forEach(bindPhotoPreview);
  });

  function showAnalyzerSection(value) {
    document.querySelectorAll('.analyzer-section').forEach(section => {
      section.style.display = 'none';
    });
    const section = document.getElementById(`section-${value}`);
    if (section) section.style.display = 'block';
  }

  function bindPhotoPreview(section) {
    const input = document.getElementById(`installation_photo_${section}`);
    const preview = document.getElementById(`installation_preview_${section}`);
    if (!input || !preview) return;

    input.addEventListener("change", function () {
      const file = this.files[0];
      if (!file || !file.type.match(/^image\/(jpe?g|png)$/)) {
        alert("–ó–∞–≥—Ä—É–∑–∏—Ç–µ JPG –∏–ª–∏ PNG.");
        return;
      }

      const reader = new FileReader();
      reader.onload = function (e) {
        const img = new Image();
        img.crossOrigin = "anonymous";
        img.onload = function () {
          const canvas = document.createElement("canvas");
          canvas.width = img.width;
          canvas.height = img.height;
          const ctx = canvas.getContext("2d");
          ctx.drawImage(img, 0, 0);
          const jpegDataUrl = canvas.toDataURL("image/jpeg", 0.9);
          input.setAttribute("data-jpeg", jpegDataUrl);
          preview.src = jpegDataUrl;
          preview.style.display = "block";
        };
        img.src = e.target.result;
      };
      reader.readAsDataURL(file);
    });
  }

  function generatePrintableContent(form, material) {
    const original = document.getElementById("pdf-content");
    const clone = original.cloneNode(true);

    // üëá –í–ê–ñ–ù–û: –æ—Ç–æ–±—Ä–∞–∑–∏–º –∞–∫—Ç–∏–≤–Ω—É—é —Å–µ–∫—Ü–∏—é
    clone.querySelectorAll('.analyzer-section').forEach(section => {
      section.style.display = 'none';
    });
    const visible = clone.querySelector(`#section-${material}`);
    if (visible) visible.style.display = 'block';

    // –ó–∞–º–µ–Ω–∏–º inputs –∏ –¥—Ä. —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ —Ç–µ–∫—Å—Ç
    clone.querySelectorAll("input, select, textarea").forEach(el => {
      let value = "‚Äî";
      if (el.type === "checkbox") {
        value = el.checked ? "‚úî –î–∞" : "‚Äî –ù–µ—Ç";
      } else if (el.type === "file") {
        value = "";
      } else {
        value = el.value;
      }

      const div = document.createElement("div");
      div.textContent = value;
      div.style.marginBottom = "4px";
      el.replaceWith(div);
    });

    // –î–æ–±–∞–≤–∏–º —Ñ–æ—Ç–æ, –µ—Å–ª–∏ –µ—Å—Ç—å
    const photoInput = document.getElementById(`installation_photo_${material}`);
    const jpegData = photoInput?.dataset?.jpeg;
    if (jpegData) {
      const img = document.createElement("img");
      img.src = jpegData;
      img.style.maxWidth = "100%";
      img.style.marginTop = "10px";
      clone.appendChild(img);
    }

    // –£–¥–∞–ª–∏–º –≤—Å–µ –∫–Ω–æ–ø–∫–∏
    clone.querySelectorAll("button").forEach(btn => btn.remove());

    return clone;
  }

  function addElementRow(containerId) {
    const container = document.getElementById(containerId);
    const wrapper = document.createElement("div");
    wrapper.className = "element-row";

    const inputElement = document.createElement("input");
    inputElement.type = "text";
    inputElement.placeholder = "–≠–ª–µ–º–µ–Ω—Ç (–Ω–∞–ø—Ä. Fe)";
    inputElement.name = `${containerId}_element[]`;
    inputElement.className = "form-control";

    const inputRange = document.createElement("input");
    inputRange.type = "text";
    inputRange.placeholder = "–î–∏–∞–ø–∞–∑–æ–Ω –∫–æ–Ω—Ü–µ–Ω—Ç—Ä–∞—Ü–∏–∏";
    inputRange.name = `${containerId}_range[]`;
    inputRange.className = "form-control";

    const removeBtn = document.createElement("button");
    removeBtn.type = "button";
    removeBtn.className = "btn btn-outline-danger btn-sm";
    removeBtn.textContent = "–£–¥–∞–ª–∏—Ç—å";
    removeBtn.onclick = () => wrapper.remove();

    wrapper.appendChild(inputElement);
    wrapper.appendChild(inputRange);
    wrapper.appendChild(removeBtn);
    container.appendChild(wrapper);
  }

  function submitForm() {
    const form = document.getElementById("form");
    const pdfPreview = document.getElementById("pdf-preview");
    const email = form.email.value;
    const material = form.material.value;

    if (!email) return alert("–í–≤–µ–¥–∏—Ç–µ email");

    const printableContent = generatePrintableContent(form, material);

    html2pdf().set({
      html2canvas: { scale: 2, useCORS: true },
      jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    }).from(printableContent).output('datauristring')
      .then(pdfDataUri => {
        pdfPreview.src = pdfDataUri;
        pdfPreview.style.display = 'block';

        return html2pdf().set({
          filename: 'oprosny_list.pdf',
          html2canvas: { scale: 2, useCORS: true },
          jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
        }).from(printableContent).outputPdf('blob');
      })
      .then(pdfBlob => {
        const formData = new FormData();
        formData.append("file", new File([pdfBlob], "oprosny_list.pdf", { type: "application/pdf" }));
        return fetch("https://tmpfiles.org/api/v1/upload", {
          method: "POST",
          body: formData
        });
      })
      .then(response => response.json())
      .then(data => {
        if (!data || !data.data || !data.data.url) throw new Error("–ù–µ —É–¥–∞–ª–æ—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å—Å—ã–ª–∫—É –Ω–∞ PDF");
        return data.data.url;
      })
      .then(link => {
        const templateParams = {
          to: `${email}, science.techade@gmail.com`,
          email: email,
          company: form.company.value,
          date: form.date.value,
          contact_person: form.contact_person.value,
          phone: form.phone.value,
          country: form.country.value,
          location: form.location.value,
          material: material,
          subject: "–ù–æ–≤—ã–π –æ–ø—Ä–æ—Å–Ω—ã–π –ª–∏—Å—Ç",
          time: new Date().toLocaleString(),
          pdf_link: link
        };

        return emailjs.send("service_1rnpxea", "template_sk137ts", templateParams);
      })
      .then(() => alert("–§–æ—Ä–º–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞. –°—Å—ã–ª–∫–∞ –Ω–∞ PDF –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø–æ email."))
      .catch((error) => {
        console.error("–û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ:", error);
        alert("–û—à–∏–±–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏: " + (error?.message || error));
      });
  }
</script>





</body>
</html>
